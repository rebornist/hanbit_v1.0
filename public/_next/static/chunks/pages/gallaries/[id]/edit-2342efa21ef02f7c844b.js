(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[925,179],{3836:function(e,t,n){"use strict";n.d(t,{L:function(){return u}});var o=n(6610),a=n(5991),r=n(6156),i=n(9669),s=n.n(i),l=n(1937),c=function(){function e(t,n,a,i,s){(0,o.Z)(this,e),(0,r.Z)(this,"url",void 0),(0,r.Z)(this,"type",void 0),(0,r.Z)(this,"token",void 0),(0,r.Z)(this,"csrf",void 0),(0,r.Z)(this,"data",void 0),(0,r.Z)(this,"xhr",void 0),this.url=t,this.type=n,null!==i&&(this.token=i),null!==s&&(this.csrf=s),null!==a&&(this.data=a)}return(0,a.Z)(e,[{key:"request",value:function(){return"GET"===this.type?this._getMethod():"POST"===this.type?this._postMethod():this._uploadMethod()}},{key:"_getMethod",value:function(){return(0,l.lN)(),s().get(this.url,{withCredentials:!0}).then((function(e){return(0,l.w7)(),e})).finally((function(){return(0,l.w7)()}))}},{key:"_postMethod",value:function(){return(0,l.lN)(),s().post(this.url,this.data,{headers:{Authorization:"Bearer ".concat(this.token),"X-CSRF-Token":this.csrf},withCredentials:!0}).then((function(e){return(0,l.w7)(),e})).finally((function(){return(0,l.w7)()}))}},{key:"_uploadMethod",value:function(){return(0,l.lN)(),s().post(this.url,this.data,{headers:{Authorization:"Bearer ".concat(this.token),"X-CSRF-Token":this.csrf},withCredentials:!0}).then((function(e){return(0,l.w7)(),e.data})).catch((function(e){return(0,l.w7)(),"upload failed"})).finally((function(){return(0,l.w7)()}))}}]),e}(),u=function(e,t,n,o,a){return new c(e,t,n,o,a).request()}},1937:function(e,t,n){"use strict";n.d(t,{lN:function(){return a},w7:function(){return r},A3:function(){return i},V$:function(){return s}});var o=n(8306);function a(){var e,t=document.createElement("div");t.setAttribute("id","loading"),t.style.zIndex="999",t.style.width="100%",t.style.height="100%",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.backgroundColor="rgba(255, 255, 255, 0.3)";var n=document.createElement("object");n.setAttribute("type","image/svg+xml"),n.setAttribute("data",o.Vf.loading),n.style.position="relative",n.style.left="48%",n.style.top="48%",t.appendChild(n),null===(e=document.querySelector("body"))||void 0===e||e.appendChild(t)}function r(){var e;document.getElementById("loading")&&(null===(e=document.getElementById("loading"))||void 0===e||e.remove())}function i(e){var t=document.getElementById(e);t.setAttribute("disabled","true"),t.innerText="";var n=document.createElement("object");n.setAttribute("type","image/svg+xml"),n.setAttribute("data",o.Vf.loadingSm),n.style.maxHeight="100%",t.appendChild(n)}function s(e,t){var n=document.getElementById(e);n.removeAttribute("disabled");var o=n.querySelector("object");o&&o.remove(),n.innerText=t}},5757:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var o=["\uc804\uccb4\ubcf4\uae30","\ud68c\uc6d0\ubcf4\uae30","\uad00\ub9ac\uc790\ubcf4\uae30"]},6071:function(e,t,n){"use strict";var o=n(3038),a=n(862);t.default=void 0;var r=a(n(7294)),i=n(1689),s=n(2441),l=n(5749),c={};function u(e,t,n,o){if(e&&(0,i.isLocalURL)(t)){e.prefetch(t,n,o).catch((function(e){0}));var a=o&&"undefined"!==typeof o.locale?o.locale:e&&e.locale;c[t+"%"+n+(a?"%"+a:"")]=!0}}var d=function(e){var t=!1!==e.prefetch,n=(0,s.useRouter)(),a=n&&n.pathname||"/",d=r.default.useMemo((function(){var t=(0,i.resolveHref)(a,e.href,!0),n=o(t,2),r=n[0],s=n[1];return{href:r,as:e.as?(0,i.resolveHref)(a,e.as):s||r}}),[a,e.href,e.as]),f=d.href,p=d.as,h=e.children,m=e.replace,g=e.shallow,v=e.scroll,y=e.locale;"string"===typeof h&&(h=r.default.createElement("a",null,h));var b=r.Children.only(h),x=b&&"object"===typeof b&&b.ref,j=(0,l.useIntersection)({rootMargin:"200px"}),k=o(j,2),w=k[0],N=k[1],E=r.default.useCallback((function(e){w(e),x&&("function"===typeof x?x(e):"object"===typeof x&&(x.current=e))}),[x,w]);(0,r.useEffect)((function(){var e=N&&t&&(0,i.isLocalURL)(f),o="undefined"!==typeof y?y:n&&n.locale,a=c[f+"%"+p+(o?"%"+o:"")];e&&!a&&u(n,f,p,{locale:o})}),[p,f,N,y,t,n]);var T={ref:E,onClick:function(e){b.props&&"function"===typeof b.props.onClick&&b.props.onClick(e),e.defaultPrevented||function(e,t,n,o,a,r,s,l){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,i.isLocalURL)(n))&&(e.preventDefault(),null==s&&(s=o.indexOf("#")<0),t[a?"replace":"push"](n,o,{shallow:r,locale:l,scroll:s}))}(e,n,f,p,m,g,v,y)},onMouseEnter:function(e){(0,i.isLocalURL)(f)&&(b.props&&"function"===typeof b.props.onMouseEnter&&b.props.onMouseEnter(e),u(n,f,p,{priority:!0}))}};if(e.passHref||"a"===b.type&&!("href"in b.props)){var _="undefined"!==typeof y?y:n&&n.locale,I=n&&n.isLocaleDomain&&(0,i.getDomainLocale)(p,_,n&&n.locales,n&&n.domainLocales);T.href=I||(0,i.addBasePath)((0,i.addLocale)(p,_,n&&n.defaultLocale))}return r.default.cloneElement(b,T)};t.default=d},5749:function(e,t,n){"use strict";var o=n(3038);t.__esModule=!0,t.useIntersection=function(e){var t=e.rootMargin,n=e.disabled||!i,l=(0,a.useRef)(),c=(0,a.useState)(!1),u=o(c,2),d=u[0],f=u[1],p=(0,a.useCallback)((function(e){l.current&&(l.current(),l.current=void 0),n||d||e&&e.tagName&&(l.current=function(e,t,n){var o=function(e){var t=e.rootMargin||"",n=s.get(t);if(n)return n;var o=new Map,a=new IntersectionObserver((function(e){e.forEach((function(e){var t=o.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)}))}),e);return s.set(t,n={id:t,observer:a,elements:o}),n}(n),a=o.id,r=o.observer,i=o.elements;return i.set(e,t),r.observe(e),function(){i.delete(e),r.unobserve(e),0===i.size&&(r.disconnect(),s.delete(a))}}(e,(function(e){return e&&f(e)}),{rootMargin:t}))}),[n,t,d]);return(0,a.useEffect)((function(){if(!i&&!d){var e=(0,r.requestIdleCallback)((function(){return f(!0)}));return function(){return(0,r.cancelIdleCallback)(e)}}}),[d]),[p,d]};var a=n(7294),r=n(8391),i="undefined"!==typeof IntersectionObserver;var s=new Map},1779:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var o=n(5893),a=n(7294),r=n(1163),i=n(3836),s=n(1664),l=n(1937),c=function(e){var t=e.photo,n=e.idToken;return(0,o.jsxs)("div",{className:"overlay-container",style:{minWidth:"71px",width:"20%",padding:"1px",display:"flex",justifyContent:"center",alignItems:"center"},id:t,children:[(0,o.jsx)("img",{src:"/media/".concat(t),style:{maxHeight:"100px"},alt:"",srcSet:""}),(0,o.jsx)("div",{className:"overlay-link small",onClick:function(e){var o,a,r,s;e.preventDefault();var l={photo:null===(r=(null===(o=e.target.parentElement)||void 0===o||null===(a=o.parentElement)||void 0===a?void 0:a.querySelector("img")).getAttribute("src"))||void 0===r?void 0:r.slice("/media/".length)};(0,i.L)("/api/image/remove","POST",l,"".concat(n),"".concat(null===(s=document.getElementById("_csrf"))||void 0===s?void 0:s.getAttribute("value"))).then((function(){document.getElementById("".concat(t)).innerHTML=""})).catch((function(e){alert(e)}))},children:(0,o.jsx)("i",{className:"fa fa-close"})}),(0,o.jsx)("div",{className:"demo"})]})};function u(e,t,o,a,r,s){if(e){var c="/api/".concat(t,"/edit/").concat(o);(0,i.L)(c,"POST",s,"".concat(a),"".concat(r)).then((function(e){alert(e.data.message),(0,l.V$)("submit-btn","\uc0ac\uc9c4 \ub4f1\ub85d"),n.g.window.location.replace("/".concat(t))})).catch((function(e){alert(e.message),(0,l.V$)("submit-btn","\uc0ac\uc9c4 \ub4f1\ub85d")}))}else alert("\uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694."),(0,l.V$)("submit-btn","\uc0ac\uc9c4 \ub4f1\ub85d")}var d=function(e){var t=e.postID,n=e.target,r=e.csrf,i=e.openGrades,d=e.postTitle,f=e.gallary,p=e.photos,h=e.idToken,m=(0,a.useState)(d),g=m[0],v=m[1];return(0,o.jsx)("div",{className:"main-container",children:(0,o.jsx)("div",{className:"container",children:(0,o.jsx)("div",{className:"row justify-content-center",children:(0,o.jsx)("div",{className:"col-10",children:(0,o.jsx)("div",{className:"main",children:(0,o.jsxs)("div",{className:"form p-30 light-gray-bg border-clear",children:[(0,o.jsx)("h2",{className:"title",children:"\uae00 \uc791\uc131"}),(0,o.jsxs)("form",{method:"post",className:"form-horizontal",children:[(0,o.jsx)("div",{dangerouslySetInnerHTML:{__html:r}}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"photo",children:"Photo Upload"}),(0,o.jsx)("input",{type:"file",className:"form-control",id:"photo",name:"photo",multiple:!0}),(0,o.jsx)("div",{className:"photo-thumb-list",id:"photo-delete-form",style:{display:"flex",flexWrap:"wrap",alignSelf:"center"},children:(0,o.jsx)("div",{className:"photo-thumb-list",id:"photo-delete-form",style:{display:"flex",flexWrap:"wrap",alignSelf:"center"},children:p&&p.map((function(e,t){return function(e,t,n){return(0,o.jsx)(c,{photo:e,idToken:n},t)}(e,t,h)}))})})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"title",style:{display:"block"},children:"\uc81c\ubaa9"}),(0,o.jsx)("input",{className:"form-control",id:"title",name:"title",onChange:function(e){var t=e.target.value;v(t)},value:g}),(0,o.jsx)("label",{htmlFor:"open_grade",style:{display:"block",marginTop:"15px"},children:"\uacf5\uac1c\ubc94\uc704"}),(0,o.jsx)("select",{id:"open_grade",name:"open_grade",className:"form-control",children:i.map((function(e,t){return(0,o.jsx)("option",{value:"".concat(t),selected:(null===f||void 0===f?void 0:f.openGrade)===e,children:e})}))})]}),(0,o.jsx)("button",{id:"submit-btn",type:"submit",className:"btn btn-default",onClick:function(e){var o;e.preventDefault(),(0,l.A3)("submit-btn");var a=null===(o=document.getElementById("_csrf"))||void 0===o?void 0:o.getAttribute("value"),r=document.getElementById("open_grade").value;!function(e,t){var n=e.length,o=[],a=[];0===n&&t(o,a);for(var r=0;r<n;r++)i(e[r]);function i(e){var r=new FileReader;r.onload=function(){if("image"==="".concat(e.type).split("/")[0]){var r=this.result;o.push(r),a.push(e.name),--n||t(o,a)}},r.readAsDataURL(e)}}(document.getElementById("photo").files,(function(e,o){if(e.length>0&&o.length>0){var i={post:n,title:g,openGrade:r,photoId:null===f||void 0===f?void 0:f.photo,photos:e,photonames:o};u(g,n,t,h,a,i)}else{var s={post:n,title:g,openGrade:r,photoId:null===f||void 0===f?void 0:f.photo};u(g,n,t,h,a,s)}}))},children:"\uae00 \uc791\uc131"}),(0,o.jsx)(s.default,{href:"/".concat(n,"/").concat(t),children:(0,o.jsx)("a",{id:"close-btn",className:"btn btn-danger text-white ml-2",children:"\ub098\uac00\uae30"})})]})]})})})})})})},f=n(5757),p=(0,r.withRouter)((function(){var e=(0,r.useRouter)().asPath,t="".concat(e).split("/")[2],n=(0,a.useState)({target:"",csrf:"",postTypes:f.b,postTitle:"",postID:"",permission:!1}),s=n[0],l=n[1];return(0,a.useEffect)((function(){var e="/api/gallaries/edit/".concat(t);(0,i.L)(e,"GET").then((function(e){l({target:"gallaries",csrf:e.data.csrf,postID:t,postTypes:f.b,gallary:e.data.gallary,photos:e.data.photos,postTitle:e.data.gallary.title,permission:e.data.permission,idToken:e.data.idToken})})).catch((function(e){alert(e.message),window.location.replace("/gallaries")}))}),[]),(0,o.jsx)(o.Fragment,{children:s.gallary&&(0,o.jsx)(d,{postID:s.postID,target:s.target,csrf:s.csrf,openGrades:s.postTypes,postTitle:s.postTitle,gallary:s.gallary?s.gallary:{},photos:s.photos?s.photos:[],idToken:s.idToken})})}))},8306:function(e,t,n){"use strict";n.d(t,{yb:function(){return o},zA:function(){return a},Vf:function(){return r},mv:function(){return i},Dj:function(){return s},Qo:function(){return l},_N:function(){return c},ly:function(){return u}});var o="/favicon.ico",a="/assets/images/team-member-3.jpg",r={logo:"/assets/images/logo.png",loading:"/assets/images/loading.svg",loadingSm:"/assets/images/loading-sm.svg",headerLoading:"/assets/images/pulse.svg"},i={sky:"/assets/images/sky.jpg",church:"/assets/images/hanbitchurch.jpg",logoc:"/assets/images/logo_c.png"},s={hht:"/assets/images/hht.jpg",background:"/assets/images/background3.jpg",peoples:"/assets/images/peoples.png",navermap:"/assets/images/navermap.png"},l={bibleworkbook:"/assets/images/bibleworkbook.jpg",people:"/assets/images/people.jpg",newfamily:"/assets/images/newfamily.jpg",school:"/assets/images/school.png"},c={background:"/assets/images/cross.jpg"},u={google:"/assets/images/google.png",naver:"/assets/images/naver.png",kakao:"/assets/images/kakao.png"}},65:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gallaries/[id]/edit",function(){return n(1779)}])},1664:function(e,t,n){e.exports=n(6071)},1163:function(e,t,n){e.exports=n(2441)},4453:function(){}},function(e){e.O(0,[774,456,480,433],(function(){return t=65,e(e.s=t);var t}));var t=e.O();_N_E=t}]);